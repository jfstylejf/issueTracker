#!/bin/bash
#issueTracker_scan <findbugs|clone|...> <commit_id>,...

usage="ERROR! \nUsage: issueTracker_scan (findbugs|clone) <commit_id> \n ERROR"

# if no args specified, show usage
if [ $# -le 1 ]; then
  echo -e $usage
  exit 1
fi

baseDir="$ISSUETRACKER_HOME/bin"

option=$1
commit_id=$2
ip="10.141.221.80"
port="8005"
projectId=`cat $baseDir/projectId`
commitId=$2
case $option in

  (findbugs)
   #post
	curl -H "Content-Type:application/json" -X POST -d '{"projectId": "$projectId", "commitId":"$commitId"}' http://$ip:$port/Scan/doScan -s | grep -Po 'msg[":]+\K[^"]+'
	;;
  (clone)
   # need to be done
    echo -e "\nNothing\n"
    ;;

  (*)
	echo -e "No option $1"
    echo -e $usage
    exit 1
    ;;

esac